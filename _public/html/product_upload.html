<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
  </head>
  <body>
    <form action="">
      <input type="text" name="name" id="name" />
      <input type="file" name="imageCover" id="image-cover" />
      <input type="file" name="images" id="images" />
      <input type="button" value="Click Me" id="clickMe" />
    </form>
    <hr />
    <button id="upload-product">Upload Product</button>

    <script>
      let uploadProduct = document.querySelector('#upload-product');

      uploadProduct.addEventListener('click', async function() {
        let formData = new FormData();
        let imageCover = document.querySelector('#image-cover');
        let images = document.querySelector('#images');

        formData.set('name', 'JTL Phantro qqq');
        formData.set(
          'summary',
          'Zola Royal bag for come in different colors to give you that classy look'
        );
        formData.set(
          'description',
          'Zola Royal bag for come in different colors to give you that classy look'
        );
        formData.set('price', 82.75);
        formData.set('tag', 'bag classy zola Heros');
        formData.set('quantity', 45);
        formData.set('shipping', true);
        formData.set('category', '5f0f10f3f8f85bcf744cfb71');
        formData.append('colour[0][colour]', 'RED');
        formData.append('colour[0][quantity]', 31);
        formData.append('colour[1][colour]', 'BLACK');
        formData.append('colour[1][quantity]', 31);
        formData.append('imageCover', imageCover.files[0]);
        formData.append('images', images.files[0]);
        // let proData = {
        //   name: 'JTL Phantro xxTgg',
        //   summary:
        //     'Zola Royal bag for come in different colors to give you that classy look',
        //   description:
        //     'Zola Royal bag for come in different colors to give you that classy look',
        //   price: 82.75,
        //   tag: 'bag classy zola Heros',
        //   quantity: 45,
        //   shipping: true,
        //   category: '5f0f10f3f8f85bcf744cfb71',
        //   colour: [
        //     { name: 'RED', quantity: 31 },
        //     { name: 'BLACK', quantity: 31 }
        //   ]
        // };

        try {
          const data = await axios.post(
            'http://127.0.0.1:4000/api/v1/product',
            // 'https://jtlfashion.herokuapp.com/api/v1/product',
            formData,
            {
              headers: {
                'Content-Type': 'multipart/form-data',
                //   'Content-Type': 'application/json',
                Authorization:
                  'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVmMGYwZTQ3ZjhmODViY2Y3NDRjZmI2YiIsImlhdCI6MTU5NjI3NTczMSwiZXhwIjoxNjA0MDUxNzMxfQ.c0In0Pyh3HV4D_LC3QWXI_oA9VPiutTwKXbgOAbuBPg'
              }
            }
          );

          console.log(data);
        } catch (error) {
          console.log(error.message);
        }
      });
    </script>
  </body>
</html>
